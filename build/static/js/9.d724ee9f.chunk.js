(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{54:function(t,e,n){"use strict";n.r(e);var a=n(14),i=n(15),c=n(24),r=n(23),s=n(25),l=n(0),o=n.n(l),u=n(59),m=n(27),d=n(60),f=n(98),p=n.n(f),h=["list","hotList"],y=function(t){function e(t){var n;return Object(a.a)(this,e),(n=Object(c.a)(this,Object(r.a)(e).call(this,t))).saveCity=function(t){t.forEach(function(t){localStorage.setItem(t.name,JSON.stringify(t.data))})},n.getCity=function(t){return JSON.parse(localStorage.getItem(t)||"[]")},n.state={cityList:[],hotList:[],loa:null,storag:[]},n}return Object(s.a)(e,t),Object(i.a)(e,[{key:"componentDidMount",value:function(){var t=this,e=this.getData();e[0].length>0?this.setState({hotList:e[1],cityList:e[0]}):Object(u.d)().then(function(e){t.filterCity(e.data.cities)}),Object(u.f)().then(function(e){var n=t.getCity("lately");n.length||n.push({nm:e.data.nm,id:e.data.id}),n.every(function(t){return t.id!=e.data.id})&&n.push({nm:e.data.nm,id:e.data.id}),n.length>3&&n.splice(-1,1),t.saveCity([{name:"lately",data:n}]),t.setState({loa:e.data.nm,storag:n})})}},{key:"filterCity",value:function(t){var e=this,n=this.state.cityList,a=this.state.hotList;t.forEach(function(t){var i=t.py.substring(0,1).toUpperCase();if(t.isHot&&a.push({id:t.id,nm:t.nm}),e.isExist(i))for(var c=0;c<n.length;c++)n[c].index===i&&n[c].citys.push({id:t.id,nm:t.nm});else n.push({index:i,citys:[{id:t.id,nm:t.nm}]})}),n.sort(function(t,e){return t.index>e.index?1:-1});var i=[{name:"list",data:n},{name:"hotList",data:a}];this.saveCity(i),this.setState({cityList:n,hotList:a})}},{key:"isExist",value:function(t){for(var e=this.state.cityList.length,n=this.state.cityList,a=0;a<e;a++)if(n[a].index===t)return!0;return!1}},{key:"skip",value:function(t,e){var n=document.getElementsByClassName(p.a.ppp),a=document.getElementsByClassName(p.a.switcColor);a.length&&(a[0].className=""),window.scrollTo(0,n[e].offsetTop),t.target.setAttribute("class",p.a.switcColor)}},{key:"selectCity",value:function(t){if(t.stopPropagation(),t.target.dataset.id){var e=t.target.dataset.id.split("&"),n={id:e[0],nm:e[1]};this.props.setPos(n);var a=this.getCity("lately");a.every(function(t){return t.id!=n.id})&&(a.unshift(n),a.length>3&&a.splice(-1,1),this.saveCity([{name:"lately",data:a}])),this.props.history.push("/home/nowList")}}},{key:"getData",value:function(){var t=this;return h.map(function(e){return t.getCity(e)})}},{key:"render",value:function(){var t=this;return o.a.createElement("div",{className:p.a.container},o.a.createElement("div",{className:p.a.mask},o.a.createElement("ul",null,o.a.createElement("li",null,o.a.createElement("a",{href:"#hot"},"\u70ed\u95e8")),o.a.createElement("li",null,o.a.createElement("a",{href:"#lately"}," \u6700\u8fd1")),o.a.createElement("li",null,o.a.createElement("a",{href:"#posi"}," \u5b9a\u4f4d")),this.state.cityList.map(function(e,n){return o.a.createElement("li",{key:e.index,onClick:function(e){t.skip(e,n)}},e.index)}))),o.a.createElement("div",{className:p.a.hot_city},o.a.createElement("ul",null,o.a.createElement("li",null,o.a.createElement("p",{className:p.a.city_title,id:"posi"},"\u5b9a\u4f4d\u57ce\u5e02"),o.a.createElement("ul",null,o.a.createElement("li",{className:p.a.li},this.state.loa||"\u5b9a\u4f4d\u5931\u8d25\u8bf7\u91cd\u8bd5"))),o.a.createElement("li",null,o.a.createElement("p",{className:p.a.city_title,id:"lately"},"\u6700\u8fd1\u8bbf\u95ee\u57ce\u5e02"),o.a.createElement("ul",{onClick:function(e){t.selectCity(e)}},this.state.storag.map(function(t){return o.a.createElement("li",{className:p.a.li,key:t.id+Math.random(),"data-id":t.id+"&"+t.nm},o.a.createElement("p",{"data-id":t.id+"&"+t.nm,className:"pointer"},t.nm))}))),o.a.createElement("li",null,o.a.createElement("p",{className:p.a.city_title,id:"hot"},"\u70ed\u95e8\u57ce\u5e02"),o.a.createElement("ul",{onClick:function(e){t.selectCity(e)}},this.state.hotList.map(function(t){return o.a.createElement("li",{className:p.a.li,key:t.id,"data-id":t.id+"&"+t.nm},o.a.createElement("p",{"data-id":t.id+"&"+t.nm,className:"pointer"}," ",t.nm))}))))),o.a.createElement("div",{className:p.a.switch_city},o.a.createElement("ul",null,this.state.cityList.map(function(e){return o.a.createElement("li",{key:e.index},o.a.createElement("p",{className:p.a.city_title+" "+p.a.ppp,id:p.a.city_title},e.index),o.a.createElement("ul",{onClick:function(e){t.selectCity(e)}},e.citys.map(function(t){return o.a.createElement("li",{className:p.a.li2,key:t.id,"data-id":t.id+"&"+t.nm},o.a.createElement("p",{"data-id":t.id+"&"+t.nm,className:"pointer"}," ",t.nm))})))}))))}}]),e}(l.Component);e.default=Object(m.b)(function(t){return{pos:t.home.posi}},{setPos:d.b})(y)},59:function(t,e,n){"use strict";var a=n(61),i=n.n(a),c=i.a.create({timeout:1e3});c.__proto__=i.a,c.interceptors.request.use(function(t){return t},function(t){return Promise.reject(t)}),c.interceptors.response.use(function(t){return t.data},function(t){return Promise.reject(t)});var r=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"get",n=arguments.length>2?arguments[2]:void 0,a=e.toUpperCase(),i={url:t,method:a,params:"GET"===a||"DELETE"===a?n:null,data:"PSOT"===a||"PUT"===a?n:null};return new Promise(function(t,e){c(i).then(function(e){t(e)}).catch(function(t){e(t)})})};n.d(e,"d",function(){return s}),n.d(e,"f",function(){return l}),n.d(e,"e",function(){return o}),n.d(e,"a",function(){return u}),n.d(e,"i",function(){return m}),n.d(e,"g",function(){return d}),n.d(e,"c",function(){return f}),n.d(e,"b",function(){return p}),n.d(e,"h",function(){return h});var s=function(){return r("/api/cityList")},l=function(){return r("/api/getLocation")},o=function(t){return r("/api/movieOnInfoList","GET",{cityId:t})},u=function(t){return r("/api/cinemaList?cityId=".concat(t))},m=function(t,e){return r("/api/searchList?kw=".concat(e,"&cityId=").concat(t))},d=function(t){return r("/api/detailmovie?movieId=".concat(t))},f=function(t){return function(t){return new Promise(function(e,n){c.all(t).then(c.spread(function(t,n){e([t,n])}))})}(t)},p=function(t){return r("/api/cinemaList?cityId=".concat(t))},h=function(t,e){return r("/ajax/cinemaDetail?cinemaId=".concat(t,"&movieId=").concat(e))}},60:function(t,e,n){"use strict";n.d(e,"b",function(){return i}),n.d(e,"c",function(){return c}),n.d(e,"a",function(){return r});var a=n(17),i=function(t){return{type:a.c,data:t}},c=function(t){return{type:a.b,data:t}},r=function(){return{type:a.a}}},98:function(t,e,n){t.exports={city_title:"city_title--3R-GT",container:"container--2a3Cj",mask:"mask--2rGtI",li:"li--37mim",li2:"li2--_GLkl",switcColor:"switcColor--2ZqqT"}}}]);
//# sourceMappingURL=9.d724ee9f.chunk.js.map