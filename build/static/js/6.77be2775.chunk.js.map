{"version":3,"sources":["views/movieInfon/index.jsx","request/axios.js","request/api.js","components/cinemaDetail/index.jsx","components/cinemaDetail/index.module.less","views/movieInfon/index.module.less"],"names":["j","MovieInfo","props","_this","Object","D_wangye_rect_day10_miao_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__","this","D_wangye_rect_day10_miao_node_modules_babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_2__","D_wangye_rect_day10_miao_node_modules_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_3__","call","back","history","goBack","handleScroll","WY","window","scrollY","date","document","getElementById","Mo","getElementsByClassName","CHeight","clientHeight","getWindowHeight","offsetTop","cinemas","state","data","loading","length","setState","message","setTimeout","forEach","item","push","bol","objY","MoviIn","style","cssText","navCinemInfo","cinemaID","movieID","location","search","split","concat","ci","detailMovie","slice","_this2","display","cityId","cityID","arr","getMovieDetail","getCinemaInfo","getCinemasMovieInfo","then","acct","forceUpdate","addEventListener","removeEventListener","compatMode","documentElement","body","nm","parseInt","toFixed","_this3","MovieDetail","react__WEBPACK_IMPORTED_MODULE_5___default","a","createElement","className","nav_wrap_left","onClick","nav_right","movie_detail","movie_filter","poster_bg","backgroundImage","albumImg","detail","poster","src","content","line_ellipsis","title_en_name","enm","score","sc","snum","fixed","type","cat","type_group","op","width","imax","episodeDur","pubDesc","arrow_g","id","scroll","selectData","_components_cinemaDetail_index_jsx__WEBPACK_IMPORTED_MODULE_9__","navCinemaInfo","none","Component","connect","pos","home","posi","instance","axios","create","timeout","__proto__","interceptors","request","use","config","error","Promise","reject","response","url","method","arguments","undefined","params","me","toUpperCase","httpDefault","resolve","res","catch","__webpack_require__","d","__webpack_exports__","api_getCityList","api_getLocation","api_getHotList","api_getCinemaInfo","api_search","api_getMovieDetail","api_getCinemasMovieInfo","api_getCinemaList","api_getSomeCinemaDetail","getCityList","getLocation","getHotList","cityid","kW","movieId","all","spread","perms","requestAll","getCinemaList","getSomeCinemaDetail","cinemaId","CinemaDetail","thisnavTo","e","cinemsID","target","dataset","CM","movie_info","map","cinema","key","data-id","movie_title","nnm","price","sellPrice","movie_address","addr","distance","afterSale","tag","allowRefund","hallTypeVOList","name","vipTag","snack","promotion","cardPromotionTag","discounts","alt","module","exports","price2","middle","filterMoview","navbar"],"mappings":"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","file":"static/js/6.77be2775.chunk.js","sourcesContent":["import React, { Component } from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport {\r\n  getCinemaInfo,\r\n  getMovieDetail,\r\n  getCinemasMovieInfo\r\n} from \"@/request/api.js\";\r\nimport MoviIn from \"./index.module.less\";\r\n\r\nimport CinemaDetail from \"../../components/cinemaDetail/index.jsx\";\r\n\r\nlet j = 8;\r\nclass MovieInfo extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      cinemas: [],\r\n      bol: true,\r\n      objY: 0,\r\n      message: \"\",\r\n      ci: [],\r\n      detailMovie: {}\r\n    };\r\n  }\r\n  loading() {\r\n    j = j + 3;\r\n    return this.state.ci.slice(j, j + 3);\r\n  }\r\n  componentDidMount() {\r\n    j = 8;\r\n    //去出掉#root上的display:flex\r\n    let root = document.getElementById(\"root\");\r\n    root.style.display = \"block\";\r\n    let cityId = this.props.history.location.state.cityID;\r\n    let movieID = this.props.location.search.split(\"=\")[1];\r\n    let arr = [getMovieDetail(movieID), getCinemaInfo(cityId)];\r\n    //axis并发\r\n    getCinemasMovieInfo(arr).then(acct => {\r\n      this.setState({\r\n        cinemas: acct[1].data.cinemas.slice(0, 8),\r\n        objY: 0, //MoviIn.date的offsetTop\r\n        ci: acct[1].data.cinemas,\r\n        detailMovie: acct[0].data.detailMovie\r\n      } , ()=>{\r\n        this.forceUpdate()\r\n      });\r\n    });\r\n\r\n    // 挂载滚动监听\r\n    window.addEventListener(\"scroll\", this.handleScroll);\r\n  }\r\n  componentWillUnmount() {\r\n    //移除滚动监听\r\n    window.removeEventListener(\"scroll\", this.handleScroll);\r\n  }\r\n  //后退\r\n  back = () => {\r\n    this.props.history.goBack();\r\n  };\r\n\r\n  //滚动距离 = window.scrollY\r\n  //元素的实际高度  xx.clientHeight  xxx.offsetHeight\r\n  // 文档的占页面的高度   = 浏览器视口的高度 - 元素的offsetTop\r\n\r\n  //到达底部 元素的实际高度 = 文档的占页面的高度 + window.scrollY\r\n  handleScroll = () => {\r\n    //滚动距离\r\n    let WY = window.scrollY;\r\n    let date = document.getElementById(\"date\");\r\n    let Mo = document.getElementsByClassName(\"movie_info--2cQIh\")[0];\r\n    //元素的实际高度\r\n    let CHeight = Mo.clientHeight;\r\n    //文档占页面的高度\r\n    let ToBoHeight = this.getWindowHeight() - Mo.offsetTop;\r\n    //到底了\r\n    if (ToBoHeight + WY >= CHeight - 30) {\r\n      let cinemas = this.state.cinemas;\r\n      let data = this.loading();\r\n      if (!data.length) {\r\n        this.setState({\r\n          message: \"木有了...\"\r\n        });\r\n        return;\r\n      }\r\n\r\n      this.setState(\r\n        {\r\n          message: \"加载中...\"\r\n        },\r\n        () => {\r\n          setTimeout(() => {\r\n            data.forEach(item => {\r\n              cinemas.push(item);\r\n              this.setState({\r\n                cinemas\r\n              });\r\n            });\r\n          }, 1000);\r\n        }\r\n      );\r\n    }\r\n\r\n    //某一元素的高度\r\n    let clientH = Mo.clientHeight;\r\n    //获取MoviIn.date的offsetTop只让他执行一次\r\n    //滑动的距离大于等于 就让加样式 , 不大于就原来的样子\r\n    if (this.state.bol) {\r\n      //获取MoviIn.date元素距离offsetTop\r\n      let obj = document.getElementsByClassName(MoviIn.date)[0];\r\n      let objY = obj.offsetTop;\r\n      this.setState({\r\n        bol: false,\r\n        objY\r\n      });\r\n    }\r\n    //一旦滚动条滚动的距离等于  MoviIn.date元素距离offsetTop\r\n    if (WY >= this.state.objY) {\r\n      //给他们的父元素加\r\n      date.style.cssText =\r\n        \" width: 100% ; position: fixed;top: 0;background-color: #fff;}\";\r\n    } else {\r\n      //否则这样样式去掉\r\n      date.style.cssText = \"\";\r\n    }\r\n  };\r\n  //浏览器视口的高度\r\n  getWindowHeight() {\r\n    var windowHeight = 0;\r\n    if (document.compatMode == \"CSS1Compat\") {\r\n      windowHeight = document.documentElement.clientHeight;\r\n    } else {\r\n      windowHeight = document.body.clientHeight;\r\n    }\r\n    return windowHeight;\r\n  }\r\n\r\n  //跳转到单个影院详情页面\r\n  navCinemInfo = cinemaID => {\r\n    let movieID = this.props.location.search.split(\"=\")[1];\r\n    if (movieID && cinemaID) {\r\n      this.props.history.push(`/shows/${movieID}`, {\r\n        cinemaID\r\n      });\r\n    }\r\n  };\r\n  fixed(nm){\r\n    if(nm){\r\n     let num = parseInt(nm) / 10000;\r\n     return num.toFixed(1); \r\n    }\r\n  }\r\n  render() {\r\n    let MovieDetail = this.state.detailMovie;\r\n    return (\r\n      <div className={MoviIn.body}>\r\n        <div className=\"navbar\">\r\n          <div className={MoviIn.nav_wrap_left }>\r\n            <i\r\n              className=\"iconfont icon-right\"\r\n              onClick={() => {\r\n                this.back();\r\n              }}\r\n            />\r\n          </div>\r\n          <div className={MoviIn.nav_right}>{MovieDetail.nm}</div>\r\n        </div>\r\n\r\n        <div className={MoviIn.movie_detail}>\r\n          <div className={MoviIn.movie_filter}>\r\n            <div\r\n              className={MoviIn.poster_bg}\r\n              style={{\r\n                backgroundImage: MovieDetail.albumImg\r\n              }}\r\n            />\r\n            <div className={MoviIn.detail}>\r\n              <div className={MoviIn.poster}>\r\n                <img src={MovieDetail.albumImg} />\r\n              </div>\r\n              <div className={MoviIn.content}>\r\n                <div className={MoviIn.line_ellipsis}>{MovieDetail.nm}</div>\r\n                <div\r\n                  className={MoviIn.title_en_name + \" \" + MoviIn.line_ellipsis}\r\n                >\r\n                  {MovieDetail.enm}\r\n                </div>\r\n                <div className={MoviIn.score + \" \" + MoviIn.line_ellipsis}>\r\n                  {MovieDetail.sc}\r\n                  <span className={MoviIn.snum}>\r\n                    {this.fixed(MovieDetail.snum) + \"万人评\"}\r\n                  </span>\r\n                </div>\r\n                <div className={MoviIn.type + \" \" + MoviIn.line_ellipsis}>\r\n                  <span>{MovieDetail.cat}</span>\r\n                  <div className={MoviIn.type_group + \" \" + MoviIn.op}>\r\n                    <img\r\n                      style={{ width: \".693333rem\" }}\r\n                      className={MoviIn.imax}\r\n                      src=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADwAAAAeCAYAAABwmH1PAAACn0lEQVRYhe2ZUW7TQBCGv0RBrUSl+KW8po/lqTkAknOBCN+gewPCDdwbmBuYGwRxAILEAZoneHRf6QNBAgmJSsvDjOu18TqWnBLV5JdW68zMemd2Z2bH2YG1FuAp8Bw4BUb0C3fALfAZ+Dmw1p4AL4Ane1Xr4fEb+DQCzhFjvwJr4Nc+tXoAHAMXwDPgfIi4MfTTWBCb1vp8OqSI2T4amyO3bTTcqxp7wMHgvqONwVNgBRiHliht0WJ8pLKJhx8ofwXMGuZfqmwdlg3jy7DWzrXhaTMriB3aSmmbhnF5y1R25eEbW2DpkUka+E08t82ttfOuLj2mvPNVRMBkyztyL/kIvATOPDJr5bvzzYBXwM0WPe7R1eDvQNzA3+byU6QoeEvh8sYja3S+BFmUAHFlkIXdbJkL6G5wguxgVMObASFijA/5gqSI8k07da3yY5Vd6vNr5bVCV4NT7et20mgfe8YGyELdIAknf98Ev9EpsoAXyGK+w58Ma9HV4EwVCClnyDPgEonLzDM2QnbIVTjV3jTMufQ8t8IuzuFYe+PQFhVe07jUoWXIIoXUJ6/AkXfjuTV2YXCGKHlJkUwMklVXnjEziuz9DbBOC5VeFyZ53F5RjufW2NXHfgx8UCU2/O2qVRjt31CfXRcqs6jQQmRxY6VFyFGV0K4I6lx4VAuMjfZZhecWHoH+rsrUFRNGf0+dQufMkQucwib6F4WHixjZ2QnluKzCaN/kAe6Z7J63hnIS3FAciSn+0vMeuzQ4RY6YPJn4kLteU+xlSA4IVW6CnAZ1Y66RmB7TvNAADKy1c31+v034kWMOh8/D/uNgcN8xRP6ZB/n/tq840v5uiFxDgHyBHNXLP2ocI9/dALf/3VXLwMpl2gly5dLny7QvwI8/pysRaQplMrsAAAAASUVORK5CYII=\"\r\n                    />\r\n                  </div>\r\n                </div>\r\n                <div\r\n                  className={\r\n                    MoviIn.src + \" \" + MoviIn.line_ellipsis + \" \" + MoviIn.op\r\n                  }\r\n                >\r\n                  {MovieDetail.src + \"/\" + MovieDetail.episodeDur + \"/分钟\"}\r\n                </div>\r\n                <div\r\n                  className={\r\n                    MoviIn.pubDesc +\r\n                    \" \" +\r\n                    MoviIn.line_ellipsis +\r\n                    \" \" +\r\n                    MoviIn.op\r\n                  }\r\n                >\r\n                  {MovieDetail.pubDesc}\r\n                </div>\r\n              </div>\r\n            </div>\r\n            <div className={MoviIn.arrow_g}>\r\n              <img src=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA8AAAAWCAYAAAAfD8YZAAAAAXNSR0IArs4c6QAAAS5JREFUOBGVkktuwkAMhpOoJ+hhSouE2HbDgiVCNCAOVtQHnINHhbgMJ6g6/f9gR848kmDJeOzxZ3scskzEOfcKXUMLjXXZByYQhJlqMvz3PM//1E9Z7fJoEp5wXvWZoILRZQtg7xVYdhXQzuR2XoEB/NYCOSkVdKI/g441BnuBbmI7aMAE7ilgxyaboYOD4RMO9EWiTwhgJksBLtEvUNolRmGvwJG+yDNsXSB4s2aplR3M4Y80BnuGfiQ7m0Q2qP6JJvaLc/VpTKx5lPe9IfpibviMb+4lOXYXyGLRsRPgSTsSpASdW8Av+YQ3Er+NzgIuELdvZMcAZIUaBsgpCA55IZIEeV+NLSC32hskXCTAH9xFRyWkUsgSrhqAJfjpL8fch0dMMIGWMkmYEIn8Az5Wgp5LHlhmAAAAAElFTkSuQmCC\" />\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div id=\"date\">\r\n          <div className={MoviIn.date}>\r\n            <ul className={MoviIn.scroll}>\r\n              <li className={MoviIn.selectData}>今天8月1号</li>\r\n              <li>明天8月2号</li>\r\n              <li>后天8月3号</li>\r\n              <li>明天8月2号</li>\r\n              <li>后天8月3号</li>\r\n              <li>明天8月2号</li>\r\n              <li>后天8月3号</li>\r\n            </ul>\r\n          </div>\r\n          {/* <div className={MoviIn.filterMoview}>\r\n            <ul>\r\n              <li>\r\n                <span>全城</span>\r\n                <i className=\"iconfont icon-lower-triangle\" />\r\n              </li>\r\n              <li>\r\n                <span>品牌</span>\r\n                <i className=\"iconfont icon-lower-triangle\" />\r\n              </li>\r\n              <li>\r\n                <span>特色</span>\r\n                <i className=\"iconfont icon-lower-triangle\" />\r\n              </li>\r\n            </ul>\r\n          </div> */}\r\n        </div>\r\n        <CinemaDetail\r\n          cinemas={this.state.cinemas}\r\n          navCinemaInfo={this.navCinemInfo}\r\n        />\r\n        <div className={this.state.message ? MoviIn.message : MoviIn.none}>\r\n          {this.state.message}\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nconst mapState = state => {\r\n  return {\r\n    pos: state.home.posi\r\n  };\r\n};\r\nexport default connect(mapState)(MovieInfo);\r\n","import axios from \"axios\";\r\n// import qs from \"qs\";\r\n\r\nlet instance = axios.create({\r\n  // baseURL: \"http://m.maoyan.com\",\r\n  timeout: 1000\r\n});\r\n//处理自己新建的axios没有 all等方法\r\ninstance.__proto__ = axios;\r\n\r\n// 添加请求拦截器，在发送请求之前做些什么(**具体查看axios文档**)--------------------------------------------\r\ninstance.interceptors.request.use(\r\n  function(config) {\r\n    // 显示loading\r\n    return config;\r\n  },\r\n  function(error) {\r\n    // 请求错误时弹框提示，或做些其他事\r\n    return Promise.reject(error);\r\n  }\r\n);\r\n\r\n// 添加响应拦截器(**具体查看axios文档**)----------------------------------------------------------------\r\ninstance.interceptors.response.use(\r\n  function(response) {\r\n    // 对响应数据做点什么，允许在数据返回客户端前，修改响应的数据\r\n    // 如果只需要返回体中数据，则如下，如果需要全部，则 return response 即可\r\n    return response.data;\r\n  },\r\n  function(error) {\r\n    // 对响应错误做点什么\r\n    return Promise.reject(error);\r\n  }\r\n);\r\n\r\n// 封装数据返回失败提示函数---------------------------------------------------------------------------\r\nfunction errorState(response) {\r\n  // 隐藏loading\r\n  // 如果http状态码正常，则直接返回数据\r\n  if (\r\n    response &&\r\n    (response.status === 200 ||\r\n      response.status === 304 ||\r\n      response.status === 400)\r\n  ) {\r\n    // 如果不需要除了data之外的数据，可以直接 return response.data\r\n    return response;\r\n  } else {\r\n    alert(\"数据获取错误\");\r\n  }\r\n}\r\n\r\n// 封装数据返回成功提示函数---------------------------------------------------------------------------\r\nfunction successState(res) {\r\n  // 隐藏loading\r\n  // 统一判断后端返回的错误码(错误码与后台协商而定)\r\n  if (res.data.code === \"000000\") {\r\n    alert(\"success\");\r\n    return res;\r\n  }\r\n}\r\nlet request = (url, method = \"get\", params) => {\r\n\r\n  let me = method.toUpperCase();\r\n  let httpDefault = {\r\n    url,\r\n    method: me,\r\n    params: me === \"GET\" || me === \"DELETE\" ? params : null,\r\n    data: me === \"PSOT\" || me === \"PUT\" ? params : null\r\n  };\r\n\r\n  return new Promise((resolve, reject) => {\r\n    instance(httpDefault)\r\n      .then(res => {\r\n        // successState(res);\r\n        resolve(res);\r\n      })\r\n      .catch(response => {\r\n        // errorState(response);\r\n        reject(response);\r\n      });\r\n  });\r\n};\r\nlet requestAll = arr => {\r\n  return new Promise((resolve , reject)=>{\r\n    instance.all(arr).then(\r\n      instance.spread(function(acct, perms) {\r\n        // 两个请求现在都执行完成\r\n        resolve([acct, perms]);\r\n      })\r\n    );\r\n  })\r\n  \r\n};\r\n\r\nexport { request, requestAll };\r\n","import { request, requestAll } from \"./axios.js\";\r\n\r\nexport const getCityList = () => {\r\n  return request(\"/api/cityList\");\r\n  // return request(\"/ajax/movieOnInfoList\");\r\n};\r\nexport const getLocation = () => {\r\n  return request(\"/api/getLocation\");\r\n};\r\nexport const getHotList = id => {\r\n  // return request(`/api/movieOnInfoList?cityId=${id}`);\r\n  return request(\"/api/movieOnInfoList\", \"GET\", { cityId: id });\r\n};\r\n\r\nexport const getCinemaInfo = cityid => {\r\n  return request(`/api/cinemaList?cityId=${cityid}`);\r\n};\r\nexport const search = (cityId, kW) => {\r\n  return request(`/api/searchList?kw=${kW}&cityId=${cityId}`);\r\n};\r\nexport const getMovieDetail = movieId => {\r\n  return request(`/api/detailmovie?movieId=${movieId}`);\r\n};\r\n\r\nexport const getCinemasMovieInfo = arr => {\r\n  return requestAll(arr);\r\n};\r\n\r\nexport const getCinemaList = cityId => {\r\n  return request(`/api/cinemaList?cityId=${cityId}`);\r\n};\r\n\r\nexport const getSomeCinemaDetail = (cinemaId, movieId) => {\r\n  return request(`/ajax/cinemaDetail?cinemaId=${cinemaId}&movieId=${movieId}`);\r\n};\r\n","import React, { Component } from \"react\";\r\nimport CM from \"./index.module.less\";\r\nclass CinemaDetail extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {};\r\n  }\r\n  thisnavTo = (e) =>{\r\n    let cinemsID = e.target.dataset.id\r\n    this.props.navCinemaInfo(cinemsID);\r\n  }\r\n  render() {\r\n    return (\r\n      <div className={CM.movie_info}>\r\n        <ul\r\n          onClick={e => {\r\n            this.thisnavTo(e);\r\n          }}\r\n        >\r\n          {this.props.cinemas.map(cinema => {\r\n            return (\r\n              <li key={cinema.id} data-id={cinema.id}>\r\n                <div className={CM.movie_title} data-id={cinema.id}>\r\n                  <p className={CM.nnm + \" pointer\"}>{cinema.nm}</p>\r\n                  <div className={CM.price}>{cinema.sellPrice}</div>\r\n                  <span>元起</span>\r\n                </div>\r\n                <div className={CM.movie_address} data-id={cinema.id}>\r\n                  <p className=\"pointer\">{cinema.addr}</p>\r\n                  <span>{cinema.distance}</span>\r\n                </div>\r\n                <div className={CM.afterSale} data-id={cinema.id}>\r\n                  <div\r\n                    className={\r\n                      cinema.tag && cinema.tag.allowRefund\r\n                        ? CM.allowRefund\r\n                        : CM.none\r\n                    }\r\n                  >\r\n                    退\r\n                  </div>\r\n\r\n                  <div className={CM.allowRefund}>改签</div>\r\n                  {cinema.tag &&\r\n                    cinema.tag.hallTypeVOList &&\r\n                    cinema.tag.hallTypeVOList.map(item => {\r\n                      return (\r\n                        <div className={CM.allowRefund} key={item.name}>\r\n                          {item.name}\r\n                        </div>\r\n                      );\r\n                    })}\r\n\r\n                  <div className={CM.vipTag}>折扣卡</div>\r\n                  <div\r\n                    className={\r\n                      cinema.tag && cinema.tag.snack ? CM.allowRefund : CM.none\r\n                    }\r\n                  >\r\n                    小吃\r\n                  </div>\r\n                </div>\r\n\r\n                <div\r\n                  className={\r\n                    cinema.promotion && cinema.promotion.cardPromotionTag\r\n                      ? CM.discounts\r\n                      : CM.none\r\n                  }\r\n                >\r\n                  <img\r\n                    src=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAeCAYAAABNChwpAAAAAXNSR0IArs4c6QAAAgFJREFUSA3Nlz1LA0EQhmf3kouFEQwi+FEYQ+xEsImFoCDoL/CLaKd/QbC0sbCzFVuxsRS1jEVAsUqrIILRQAhaBGKMuawzwpGAm83mNhddCHfZnd3n3Z2ZuxsG2JI3YtQpVw6AiTkhYJj6/GqMwSsIdm312DsnMyzLCF79rGRAiIhfUOm6jL0FQvZU4Gfn0GU4KcINE5vjsc9LFXajE9kcfT7UDZaMQWwuG9Dpi/YyiIWZjqnSxrOAtWgANsYDysV1Bj0L0Flcx8ZoC1F0wf50UMo5fqjCY1FIxxo7jQSUHWgK+ag2YprfGwnIlQTQTk3a/46B2UEOIUu+v0gIIMgZLLTIZHJTOl+TL4K9ShckMc36Q+pc356QB6FLLJQFCqi4f39d2WoKLTy03ckg2OjAvcyXh9n1KX8eA0YC4n0MtuLoJru+o3bvjAS8o2vpfXCYsGEzZkFYHQ5SbcoglM5o6KQAoxhIDHBYiVqYERZcZB04f3aghNGv04wEuIDbQg3u8Lc4YsHymAVLeD17cuDypbWKjgggIZTpVwhM5x1YxzdlpaaXXB0T4J5GEbPy6F7/8WwUhC7U5OpZgIPfU5qnrNTn+UmoXLWNQc8n0AZDacqxUskpLXwcJDbHMinlI0O9NLI51WiAZZLa0odRZBKbU4FINRoDdtoNdxCDWMQk9jePWpE8hVOLbwAAAABJRU5ErkJggg==\"\r\n                    alt=\"\"\r\n                  />\r\n                  <span>\r\n                    {cinema.promotion && cinema.promotion.cardPromotionTag}\r\n                  </span>\r\n                </div>\r\n              </li>\r\n            );\r\n          })}\r\n        </ul>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default CinemaDetail;\r\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"movie_info\":\"movie_info--2cQIh\",\"movie_title\":\"movie_title--1p3ie\",\"price2\":\"price2--2oon4\",\"movie_address\":\"movie_address--3ATrj\",\"afterSale\":\"afterSale--2_DEf\",\"allowRefund\":\"allowRefund--227jS\",\"vipTag\":\"vipTag--3x3uN\",\"discounts\":\"discounts--323HL\",\"none\":\"none--138e8\",\"nnm\":\"nnm--YJPbJ\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"body\":\"body--Bc5-b\",\"nav_wrap_left\":\"nav_wrap_left--3U76G\",\"movie_detail\":\"movie_detail--TXV8c\",\"movie_filter\":\"movie_filter--w1Bvl\",\"poster_bg\":\"poster_bg--2Oc9G\",\"detail\":\"detail--D8KsT\",\"content\":\"content--1Uic8\",\"line_ellipsis\":\"line_ellipsis--2GKy4\",\"middle\":\"middle--32Ggw\",\"title_en_name\":\"title_en_name--3fJpB\",\"score\":\"score--2_zud\",\"snum\":\"snum--3i1Kv\",\"type\":\"type--1a0Xg\",\"op\":\"op--3ixEW\",\"arrow_g\":\"arrow_g--sdzfO\",\"poster\":\"poster--1jrk6\",\"date\":\"date--1b6Cv\",\"scroll\":\"scroll--20Lkt\",\"selectData\":\"selectData--rJ4SJ\",\"filterMoview\":\"filterMoview--MCFCX\",\"movie_info\":\"movie_info--3rLaA\",\"movie_title\":\"movie_title--2UJ-P\",\"price2\":\"price2--3URlG\",\"movie_address\":\"movie_address--1_bhM\",\"afterSale\":\"afterSale--1FXYH\",\"allowRefund\":\"allowRefund--1hKK5\",\"vipTag\":\"vipTag--2abA3\",\"discounts\":\"discounts--2MEom\",\"none\":\"none--cGF6a\",\"message\":\"message--oGy5c\",\"navbar\":\"navbar--25oyn\",\"nav_right\":\"nav_right--1NQGR\"};"],"sourceRoot":""}