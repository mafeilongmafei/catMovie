{"version":3,"sources":["views/position/index.jsx","request/axios.js","request/api.js","store/actions/home.js","views/position/index.module.less"],"names":["ar","PositionCity","props","_this","Object","D_wangye_rect_day10_miao_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__","this","D_wangye_rect_day10_miao_node_modules_babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_2__","D_wangye_rect_day10_miao_node_modules_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_3__","call","saveCity","obj","forEach","item","localStorage","setItem","name","JSON","stringify","data","getCity","parse","getItem","state","cityList","hotList","loa","storag","_this2","d","getData","length","setState","getCityList","then","res","filterCity","cities","getLocation","push","nm","id","every","splice","_this3","list","city","letter","py","substring","toUpperCase","isHot","isExist","n","index","citys","sort","x","y","s","len","i","e","p","document","getElementsByClassName","po","ppp","col","switcColor","className","window","scrollTo","offsetTop","target","setAttribute","stopPropagation","dataset","arr","split","da","setPos","unshift","history","_this4","map","_this5","react__WEBPACK_IMPORTED_MODULE_5___default","a","createElement","container","mask","href","key","onClick","skip","hot_city","city_title","li","selectCity","Math","random","data-id","switch_city","li2","Component","connect","pos","home","posi","instance","axios","create","timeout","__proto__","interceptors","request","use","config","error","Promise","reject","response","url","method","arguments","undefined","params","me","httpDefault","resolve","catch","__webpack_require__","__webpack_exports__","api_getCityList","api_getLocation","api_getHotList","api_getCinemaInfo","api_search","api_getMovieDetail","api_getCinemasMovieInfo","api_getCinemaList","api_getSomeCinemaDetail","getHotList","cityId","getCinemaInfo","cityid","concat","search","kW","getMovieDetail","movieId","getCinemasMovieInfo","all","spread","acct","perms","requestAll","getCinemaList","getSomeCinemaDetail","cinemaId","setValue","remValue","_actionTypes__WEBPACK_IMPORTED_MODULE_0__","type","SETPOSITION","value","SETINPUTVALUE","REMOVEINPUTVALUE","module","exports"],"mappings":"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","file":"static/js/9.d724ee9f.chunk.js","sourcesContent":["import React, { Component  , createRef} from \"react\";\r\nimport { getCityList, getLocation } from \"../../request/api.js\";\r\nimport { connect } from \"react-redux\";\r\n\r\nimport { setPos } from \"../../store/actions/home\";\r\nimport po from \"./index.module.less\";\r\n\r\nlet ar = [\"list\", \"hotList\"];\r\nclass PositionCity extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      cityList: [],\r\n      hotList: [],\r\n      loa: null,\r\n      storag: []\r\n    };\r\n    // this.myRef = React.createRef();\r\n  }\r\n\r\n  componentDidMount() {\r\n    // [ { index : A , citys : [ { id : 1 , num : city}]}]\r\n    //本地数据\r\n    let d = this.getData();\r\n    if (d[0].length > 0) {\r\n      this.setState({\r\n        hotList: d[1],\r\n        cityList: d[0]\r\n      });\r\n    } else {\r\n      //获取数据\r\n      getCityList().then(res => {\r\n        this.filterCity(res.data.cities);\r\n      });\r\n    }\r\n    getLocation().then(res => {\r\n      let data = this.getCity(\"lately\");\r\n      if (!data.length) {\r\n        data.push({ nm: res.data.nm, id: res.data.id });\r\n      }\r\n      let bol = data.every(item => {\r\n        return item.id != res.data.id;\r\n      });\r\n      if (bol) {\r\n        data.push({ nm: res.data.nm, id: res.data.id });\r\n      }\r\n      if (data.length > 3) {\r\n        data.splice(-1, 1);\r\n      }\r\n      this.saveCity([{ name: \"lately\", data }]);\r\n      this.setState({\r\n        loa: res.data.nm,\r\n        storag: data\r\n      });\r\n    });\r\n  }\r\n  filterCity(data) {\r\n    let list = this.state.cityList;\r\n    let hotList = this.state.hotList;\r\n    data.forEach(city => {\r\n      let letter = city.py.substring(0, 1).toUpperCase();\r\n      if (city.isHot) {\r\n        hotList.push({ id: city.id, nm: city.nm });\r\n      }\r\n      if (this.isExist(letter)) {\r\n        //如果有就是增加\r\n        for (let n = 0; n < list.length; n++) {\r\n          if (list[n].index === letter) {\r\n            list[n].citys.push({ id: city.id, nm: city.nm });\r\n          }\r\n        }\r\n        //没有新增\r\n      } else {\r\n        list.push({\r\n          index: letter,\r\n          citys: [{ id: city.id, nm: city.nm }]\r\n        });\r\n      }\r\n    });\r\n\r\n    list.sort((x, y) => {\r\n      if (x.index > y.index) {\r\n        return 1;\r\n      } else {\r\n        return -1;\r\n      }\r\n    });\r\n    //保存到本地\r\n    let s = [{ name: \"list\", data: list }, { name: \"hotList\", data: hotList }];\r\n    this.saveCity(s);\r\n    this.setState({\r\n      cityList: list,\r\n      hotList\r\n    });\r\n  }\r\n  //是否存在\r\n  isExist(letter) {\r\n    let len = this.state.cityList.length;\r\n    let list = this.state.cityList;\r\n    for (let i = 0; i < len; i++) {\r\n      if (list[i].index === letter) {\r\n        return true;\r\n      }\r\n    }\r\n    return false;\r\n  }\r\n  //跳转\r\n  skip(e, index) {\r\n    let p = document.getElementsByClassName(po.ppp);\r\n    let col = document.getElementsByClassName(po.switcColor);\r\n    col.length && (col[0].className = \"\");\r\n    //  let con = document.getElementsByClassName(\"switch_city\")[0];\r\n    //   con.scrollTop = p[index].offsetTop\r\n    // window.scrollBy(0, p[index].offsetTop);\r\n    //父元素子元素小才能出现滚动条\r\n    window.scrollTo(0, p[index].offsetTop);\r\n\r\n    e.target.setAttribute(\"class\", po.switcColor);\r\n  }\r\n  selectCity(e) {\r\n     e.stopPropagation();\r\n    if(e.target.dataset.id){\r\n       let arr = e.target.dataset.id.split(\"&\");\r\n       let da = { id: arr[0], nm: arr[1] };\r\n       this.props.setPos(da);\r\n       let data = this.getCity(\"lately\");\r\n       let bol = data.every(item => {\r\n         return item.id != da.id;\r\n       });\r\n       if (bol) {\r\n         data.unshift(da);\r\n         if (data.length > 3) {\r\n           data.splice(-1, 1);\r\n         }\r\n         this.saveCity([{ name: \"lately\", data }]);\r\n       }\r\n       this.props.history.push(\"/home/nowList\");\r\n    }\r\n   \r\n  }\r\n  saveCity = obj => {\r\n    obj.forEach(item => {\r\n      localStorage.setItem(item.name, JSON.stringify(item.data));\r\n    });\r\n  };\r\n  getCity = name => {\r\n    return JSON.parse(localStorage.getItem(name) || \"[]\");\r\n  };\r\n  getData() {\r\n    //从本地加载数据\r\n    let d = ar.map(item => {\r\n      return this.getCity(item);\r\n    });\r\n    return d;\r\n  }\r\n  render() {\r\n    return (\r\n      <div className={po.container}>\r\n        <div className={po.mask}>\r\n          <ul>\r\n            <li>\r\n              <a href=\"#hot\">热门</a>\r\n            </li>\r\n            <li>\r\n              <a href=\"#lately\"> 最近</a>\r\n            </li>\r\n            <li>\r\n              <a href=\"#posi\"> 定位</a>\r\n            </li>\r\n            {this.state.cityList.map((city, index) => {\r\n              return (\r\n                <li\r\n                  key={city.index}\r\n                  onClick={e => {\r\n                    this.skip(e, index);\r\n                  }}\r\n                >\r\n                  {city.index}\r\n                </li>\r\n              );\r\n            })}\r\n          </ul>\r\n        </div>\r\n        <div className={po.hot_city}>\r\n          <ul>\r\n            <li>\r\n              <p className={po.city_title} id=\"posi\">\r\n                定位城市\r\n              </p>\r\n              <ul>\r\n                <li className={po.li}>\r\n                  {this.state.loa || \"定位失败请重试\"}\r\n                </li>\r\n              </ul>\r\n            </li>\r\n            <li>\r\n              <p className={po.city_title} id=\"lately\">\r\n                最近访问城市\r\n              </p>\r\n              <ul\r\n                onClick={e => {\r\n                  this.selectCity(e);\r\n                }}\r\n              >\r\n                {this.state.storag.map(item => {\r\n                  return (\r\n                    <li\r\n                      className={po.li}\r\n                      key={item.id + Math.random()}\r\n                      data-id={item.id + \"&\" + item.nm}\r\n                    >\r\n                      <p data-id={item.id + \"&\" + item.nm} className=\"pointer\">\r\n                        {item.nm}\r\n                      </p>\r\n                    </li>\r\n                  );\r\n                })}\r\n              </ul>\r\n            </li>\r\n            <li>\r\n              <p className={po.city_title} id=\"hot\">\r\n                热门城市\r\n              </p>\r\n              <ul\r\n                onClick={e => {\r\n                  this.selectCity(e);\r\n                }}\r\n              >\r\n                {this.state.hotList.map(list => {\r\n                  return (\r\n                    <li\r\n                      className={po.li}\r\n                      key={list.id}\r\n                      data-id={list.id + \"&\" + list.nm}\r\n                    >\r\n                      <p data-id={list.id + \"&\" + list.nm} className=\"pointer\">\r\n                        {\" \"}\r\n                        {list.nm}\r\n                      </p>\r\n                    </li>\r\n                  );\r\n                })}\r\n              </ul>\r\n            </li>\r\n          </ul>\r\n        </div>\r\n        <div className={po.switch_city}>\r\n          <ul>\r\n            {this.state.cityList.map(city => {\r\n              return (\r\n                <li key={city.index}>\r\n                  <p\r\n                    className={po.city_title + \" \" + po.ppp}\r\n                    id={po.city_title}\r\n                  >\r\n                    {city.index}\r\n                  </p>\r\n                  <ul\r\n                    onClick={e => {\r\n                      this.selectCity(e);\r\n                    }}\r\n                  >\r\n                    {city.citys.map(item => {\r\n                      return (\r\n                        <li\r\n                          className={po.li2}\r\n                          key={item.id}\r\n                          data-id={item.id + \"&\" + item.nm}\r\n                        >\r\n                          <p\r\n                            data-id={item.id + \"&\" + item.nm}\r\n                            className=\"pointer\"\r\n                          >\r\n                            {\" \"}\r\n                            {item.nm}\r\n                          </p>\r\n                        </li>\r\n                      );\r\n                    })}\r\n                  </ul>\r\n                </li>\r\n              );\r\n            })}\r\n          </ul>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\nconst mapstate = state => {\r\n  return {\r\n    pos: state.home.posi\r\n  };\r\n};\r\n\r\nexport default connect(\r\n  mapstate,\r\n  { setPos }\r\n)(PositionCity);\r\n\r\n//createRef\r\n","import axios from \"axios\";\r\n// import qs from \"qs\";\r\n\r\nlet instance = axios.create({\r\n  // baseURL: \"http://m.maoyan.com\",\r\n  timeout: 1000\r\n});\r\n//处理自己新建的axios没有 all等方法\r\ninstance.__proto__ = axios;\r\n\r\n// 添加请求拦截器，在发送请求之前做些什么(**具体查看axios文档**)--------------------------------------------\r\ninstance.interceptors.request.use(\r\n  function(config) {\r\n    // 显示loading\r\n    return config;\r\n  },\r\n  function(error) {\r\n    // 请求错误时弹框提示，或做些其他事\r\n    return Promise.reject(error);\r\n  }\r\n);\r\n\r\n// 添加响应拦截器(**具体查看axios文档**)----------------------------------------------------------------\r\ninstance.interceptors.response.use(\r\n  function(response) {\r\n    // 对响应数据做点什么，允许在数据返回客户端前，修改响应的数据\r\n    // 如果只需要返回体中数据，则如下，如果需要全部，则 return response 即可\r\n    return response.data;\r\n  },\r\n  function(error) {\r\n    // 对响应错误做点什么\r\n    return Promise.reject(error);\r\n  }\r\n);\r\n\r\n// 封装数据返回失败提示函数---------------------------------------------------------------------------\r\nfunction errorState(response) {\r\n  // 隐藏loading\r\n  // 如果http状态码正常，则直接返回数据\r\n  if (\r\n    response &&\r\n    (response.status === 200 ||\r\n      response.status === 304 ||\r\n      response.status === 400)\r\n  ) {\r\n    // 如果不需要除了data之外的数据，可以直接 return response.data\r\n    return response;\r\n  } else {\r\n    alert(\"数据获取错误\");\r\n  }\r\n}\r\n\r\n// 封装数据返回成功提示函数---------------------------------------------------------------------------\r\nfunction successState(res) {\r\n  // 隐藏loading\r\n  // 统一判断后端返回的错误码(错误码与后台协商而定)\r\n  if (res.data.code === \"000000\") {\r\n    alert(\"success\");\r\n    return res;\r\n  }\r\n}\r\nlet request = (url, method = \"get\", params) => {\r\n\r\n  let me = method.toUpperCase();\r\n  let httpDefault = {\r\n    url,\r\n    method: me,\r\n    params: me === \"GET\" || me === \"DELETE\" ? params : null,\r\n    data: me === \"PSOT\" || me === \"PUT\" ? params : null\r\n  };\r\n\r\n  return new Promise((resolve, reject) => {\r\n    instance(httpDefault)\r\n      .then(res => {\r\n        // successState(res);\r\n        resolve(res);\r\n      })\r\n      .catch(response => {\r\n        // errorState(response);\r\n        reject(response);\r\n      });\r\n  });\r\n};\r\nlet requestAll = arr => {\r\n  return new Promise((resolve , reject)=>{\r\n    instance.all(arr).then(\r\n      instance.spread(function(acct, perms) {\r\n        // 两个请求现在都执行完成\r\n        resolve([acct, perms]);\r\n      })\r\n    );\r\n  })\r\n  \r\n};\r\n\r\nexport { request, requestAll };\r\n","import { request, requestAll } from \"./axios.js\";\r\n\r\nexport const getCityList = () => {\r\n  return request(\"/api/cityList\");\r\n  // return request(\"/ajax/movieOnInfoList\");\r\n};\r\nexport const getLocation = () => {\r\n  return request(\"/api/getLocation\");\r\n};\r\nexport const getHotList = id => {\r\n  // return request(`/api/movieOnInfoList?cityId=${id}`);\r\n  return request(\"/api/movieOnInfoList\", \"GET\", { cityId: id });\r\n};\r\n\r\nexport const getCinemaInfo = cityid => {\r\n  return request(`/api/cinemaList?cityId=${cityid}`);\r\n};\r\nexport const search = (cityId, kW) => {\r\n  return request(`/api/searchList?kw=${kW}&cityId=${cityId}`);\r\n};\r\nexport const getMovieDetail = movieId => {\r\n  return request(`/api/detailmovie?movieId=${movieId}`);\r\n};\r\n\r\nexport const getCinemasMovieInfo = arr => {\r\n  return requestAll(arr);\r\n};\r\n\r\nexport const getCinemaList = cityId => {\r\n  return request(`/api/cinemaList?cityId=${cityId}`);\r\n};\r\n\r\nexport const getSomeCinemaDetail = (cinemaId, movieId) => {\r\n  return request(`/ajax/cinemaDetail?cinemaId=${cinemaId}&movieId=${movieId}`);\r\n};\r\n","import { SETPOSITION, SETINPUTVALUE, REMOVEINPUTVALUE } from \"./actionTypes\";\r\n\r\n\r\nexport const setPos = (po)=>{\r\n    return {\r\n        type : SETPOSITION,\r\n        data : po\r\n    }\r\n}\r\n\r\nexport const setValue = (value) => {\r\n    return {\r\n      type: SETINPUTVALUE,\r\n      data : value\r\n    };\r\n}\r\n\r\nexport const remValue = () => {\r\n    return {\r\n      type: REMOVEINPUTVALUE,\r\n    };\r\n}","// extracted by mini-css-extract-plugin\nmodule.exports = {\"city_title\":\"city_title--3R-GT\",\"container\":\"container--2a3Cj\",\"mask\":\"mask--2rGtI\",\"li\":\"li--37mim\",\"li2\":\"li2--_GLkl\",\"switcColor\":\"switcColor--2ZqqT\"};"],"sourceRoot":""}